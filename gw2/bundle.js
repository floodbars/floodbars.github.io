!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t){e.exports=React},function(e,t){e.exports=ReactDOM},function(e,t,n){n(4),e.exports=n(3)},function(e,t,n){e.exports=n.p+"tyrian-bookshelf.html"},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(1),i=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(){return Math.floor(2*Math.random())%2==0}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._books=t,this._achievements=n}var t,n,o;return t=e,(n=[{key:"generateCompleteProgress",value:function(){return this._achievements.map(function(e){return{bits:[],current:e.bits.length,done:!0,id:e.achievementId,max:e.bits.length}})}},{key:"generatePartialProgress",value:function(){return this._achievements.map(function(e){var t=e.bits.length,n=s(),o=[],r=t;if(!n){for(var a=0;a<t;a++){s()?o.push(a):r--}r==t&&(n=!0,o=[])}return{bits:o,current:r,done:n,id:e.achievementId,max:t}})}},{key:"mapAchievementsToBooks",value:function(e){var t={};this._achievements.forEach(function(e){return t[e.achievementId]=e});var n={},o=[];return this._books.forEach(function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){c(e,t,n[t])})}return e}({},e,{status:"locked"});o.push(t),n[e.name]=t}),this._achievements.forEach(function(e){e.bits.map(function(t,o){var r=t.book;if(r){var a=n[r];if(null==a)console.log("Unable to find book with name: "+r);else if(t.page)a.text.find(function(e){return e.page==t.page}).achievement=e;else n[r].achievement=e}}),e.unlockOnCompletion&&e.unlockOnCompletion.forEach(function(t){var o=t.book;n[o].text.find(function(e){return e.page==t.page}).achievement=e})}),e.forEach(function(e){var o=t[e.id];null!=o&&(o.bits.map(function(t,o){var r=e.done||e.bits.includes(o),a=t.book;if(r&&a){var i=n[a];if(t.page)if(null==i)console.log("Unable to find book with name: "+a);else i.text.find(function(e){return e.page==t.page}).isUnlocked=!0;else i.status="complete"}}),e.done&&o.unlockOnCompletion&&o.unlockOnCompletion.forEach(function(e){var t=e.book;n[t].text.find(function(t){return t.page==e.page}).isUnlocked=!0}))}),o.forEach(function(e){if("paged"==e.type){var t=e.text.filter(function(e){return e.isUnlocked}).length;0==t||(t==e.text.length?e.status="complete":e.status="partial")}else"book-paged"==e.type&&"complete"==e.status&&e.text.forEach(function(e){return e.isUnlocked=!0})}),o}}])&&u(t.prototype,n),o&&u(t,o),e}();function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),y(this,b(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props.value,t=encodeURIComponent(e);return r.a.createElement("div",{className:"card text-dark bg-light mb-2 mt-2"},r.a.createElement("div",{className:"preview card-body p-2 p-sm-3"},r.a.createElement("span",{class:"badge badge-warning rounded-circle p-2 mr-3"},"ðŸ’¡"),r.a.createElement("b",null,"Hint"),": ",r.a.createElement("a",{href:"https://wiki.guildwars2.com/wiki/"+t,target:"_new",className:"text-info"},e)))}}])&&p(n.prototype,o),a&&p(n,a),t}();function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,w(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,r.a.Component),n=t,(o=[{key:"getHint",value:function(){var e=this.props.book;if("paged"==e.type||"book-paged"==e.type){var t=new Set(e.text.filter(function(e){return!e.isUnlocked}).map(function(e){return e.achievement}));if(1==t.size){var n=t.values().next().value;if(null!=n)return n.name}}else if(e.achievement)return e.achievement.name;return e.name}},{key:"render",value:function(){var e=this.props.book,t=this.getHint();return r.a.createElement("div",{className:"card border-0"},r.a.createElement("div",{className:"preview card-body p-0"},r.a.createElement("h4",{className:"card-title"},e.name,r.a.createElement("span",{className:"badge badge-warning ml-2"},"Missing")),r.a.createElement(h,{value:t}),r.a.createElement("div",{className:"bd-callout bd-callout-warning text-secondary p-2 p-sm-3"},"You have yet to acquire this book.")))}}])&&v(n.prototype,o),a&&v(n,a),t}();function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function S(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,j(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){return this.props.page.isUnlocked?r.a.createElement("div",{className:"card mb-3 "},this.props.page.description&&r.a.createElement("div",{className:"card-header p-2"},this.props.page.description),r.a.createElement("div",{className:"preview card-body p-2 p-sm-3"},this.props.page.text.split("\n").map(function(e,t){return r.a.createElement("p",{key:"p-"+t},e)}))):r.a.createElement("div",{className:"bd-callout bd-callout-warning text-secondary p-2 p-sm-3"},r.a.createElement("span",{className:"badge badge-warning mr-2"},"Missing"),this.props.page.description&&this.props.page.description,this.props.page.achievement&&!this.props.hideHint&&r.a.createElement(h,{value:this.props.page.achievement.name}))}}])&&_(n.prototype,o),a&&_(n,a),t}();function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function A(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),A(this,T(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props.book;if(!e)return"Uh-oh";var t=new Set(e.text.filter(function(e){return!e.isUnlocked}).map(function(e){return e.achievement})),n=1==t.size;return r.a.createElement("div",{className:"card border-0"},r.a.createElement("div",{className:"card-body p-0"},r.a.createElement("h4",{className:"card-title"},e.name),n&&r.a.createElement(h,{value:t.values().next().value.name}),e.text.map(function(e){return r.a.createElement(C,{page:e,key:e.page,hideHint:n})})))}}])&&x(n.prototype,o),a&&x(n,a),t}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function K(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var H=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),K(this,M(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props.value;return r.a.createElement("div",{className:"card border-0"},r.a.createElement("div",{className:"preview card-body p-0"},r.a.createElement("h4",{className:"card-title"},e.name),e.text.split("\n").map(function(e,t){return r.a.createElement("p",{key:"p-"+t},e)})))}}])&&U(n.prototype,o),a&&U(n,a),t}();function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var F=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),z(this,V(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e=this.props.book;return e?"locked"==e.status?r.a.createElement(k,{book:e}):"paged"==e.type||"book-paged"==e.type?r.a.createElement(B,{book:e}):r.a.createElement(H,{value:e}):r.a.createElement("div",{className:"card border-0"},r.a.createElement("div",{className:"card-body text-secondary p-0"},"No book selected to preview."))}}])&&Y(n.prototype,o),a&&Y(n,a),t}();function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Q(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,W(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,r.a.Component),n=t,(o=[{key:"handleChange",value:function(e){this.props.onChange(e.target.checked)}},{key:"render",value:function(){return r.a.createElement("label",{className:"btn form-check-inline btn-outline-tyria btn-sm mb-1 "+(this.props.isChecked?"active":"disabled")},r.a.createElement("input",{type:"checkbox",checked:this.props.isChecked,onChange:this.handleChange.bind(this),autoComplete:"off"})," ",this.props.name)}}])&&J(n.prototype,o),a&&J(n,a),t}();function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function te(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var re=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),te(this,ne(t).apply(this,arguments))}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(t,r.a.Component),n=t,(o=[{key:"setValue",value:function(e,t){this.props.onSelectionChange(e,t)}},{key:"render",value:function(){var e=this,t=this.props.filters;return r.a.createElement("div",{className:"input-group p-1"},r.a.createElement("label",{className:"my-1 mr-2"},"Show only"),r.a.createElement("div",{className:"btn-group-toggle mr-1"},Object.keys(t).map(function(n){return r.a.createElement(Z,{key:n,name:n,isChecked:t[n],onChange:function(t){return e.setValue(n,t)}})})))}}])&&ee(n.prototype,o),a&&ee(n,a),t}();function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ce(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ce(this,ue(t).call(this,e))).state=e.value,n.onClick=e.onClick,n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(t,r.a.Component),n=t,(o=[{key:"render",value:function(){var e="light";switch(this.state.status){case"partial":e="secondary";break;case"complete":e="tyria";break;case"locked":default:e="light"}var t="list-group-item-"+e,n=this.props.filters[this.state.status]?"d-flex":"d-none",o=this.props.activeBook==this.state.name?"active":"";return r.a.createElement("a",{href:"#",className:"list-group-item p-2 pl-sm-3 ".concat(t," ").concat(n," ").concat(o," justify-content-between align-items-center"),onClick:this.onClick},this.state.name,"partial"==this.state.status&&r.a.createElement("span",{className:"badge badge-warning badge-pill"},this.state.text.filter(function(e){return!e.isUnlocked}).length))}}])&&ie(n.prototype,o),a&&ie(n,a),t}();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ye(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ye(this,be(t).call(this,e))).state={selection:null,filters:{complete:!0,partial:!0,locked:!0},showConfig:!1},n.configRef=r.a.createRef(),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&me(e,t)}(t,r.a.Component),n=t,(o=[{key:"previewBook",value:function(e){this.setState({selection:e})}},{key:"_onSelectionChange",value:function(e,t){var n=this.state.filters;n[e]=t,this.setState({filters:n})}},{key:"_toggleConfiguration",value:function(){var e=this,t=!this.state.showConfig;this.setState({showConfig:t},function(){t&&(e.configRef.current.scrollTop=0)})}},{key:"render",value:function(){var e=this,t=this.state,n=(t.error,t.isLoaded,t.selection),o=t.filters,a=t.showConfig,i=this.props.repository.mapAchievementsToBooks(this.props.achievements);return i.sort(function(e,t){return e.name.localeCompare(t.name)}),r.a.createElement("div",{className:"codex row h-100"},r.a.createElement("nav",{id:"pane-nav",className:"col-sm-4 p-0 shadow-sm",style:{overflowY:"auto"},ref:this.configRef},r.a.createElement("nav",{class:"navbar navbar-dark bg-tyria sticky-top shadow mb-2"},r.a.createElement("a",{class:"navbar-brand",href:"#"},"Tyrian Bookshelf"),r.a.createElement("button",{className:"btn btn-tyria",type:"button",onClick:function(){return e._toggleConfiguration()}},"âš™")),r.a.createElement("div",{className:"card bg-light border-tyria m-4-sm p-3-sm m-2 p-1 "+(a?"":"collapse"),id:"bookshelfConfig"},r.a.createElement(re,{filters:o,onSelectionChange:this._onSelectionChange.bind(this)})),r.a.createElement("div",{className:"list-group p-2"},i.map(function(t){return r.a.createElement(le,{key:t.name,activeBook:null==n?null:n.name,value:t,onClick:function(){return e.previewBook(t)},filters:o})}))),r.a.createElement("main",{id:"pane-main",className:"col-sm-8 p-3",style:{overflowY:"auto"}},r.a.createElement(F,{book:n})))}}])&&pe(n.prototype,o),a&&pe(n,a),t}();function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=ge(t).call(this,e))||"object"!==de(r)&&"function"!=typeof r?we(o):r).state={apiKey:"UNLOCK_ALL",areBooksLoaded:!1,books:null,areAchievementsLoaded:!1,achievements:null,repository:null,filters:{},areAccountAchievementsLoaded:!1},n.handleChange=n.handleChange.bind(we(n)),n.handleSubmit=n.handleSubmit.bind(we(n)),n}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(t,r.a.Component),n=t,(o=[{key:"componentDidMount",value:function(){this.loadAchievements(),this.loadBooks()}},{key:"loadAchievements",value:function(){var e=this;fetch("https://floodbars.github.io/gw2/data/bookshelf-achievements.json").then(function(e){return e.json()}).then(function(t){e.setState({errors:e.state.errors,achievements:t,areAchievementsLoaded:!0})},function(t){e.setState({areAchievementsLoaded:!0,books:e.state.books,areBooksLoaded:e.state.areBooksLoaded,error:t})})}},{key:"loadBooks",value:function(){var e=this;fetch("https://floodbars.github.io/gw2/data/bookshelf-books.json").then(function(e){return e.json()}).then(function(t){e.setState({errors:e.state.errors,books:t,areBooksLoaded:!0})},function(t){e.setState({areBooksLoaded:!0,achievements:e.state.achievements,areAchievementsLoaded:e.state.areAchievementsLoaded,error:t})})}},{key:"loadAccountAchievements",value:function(){var e=this,t=new l(this.state.books,this.state.achievements);if(this.setState({repository:t}),"UNLOCK_ALL"!=this.state.apiKey)if("UNLOCK_NONE"!=this.state.apiKey)if("UNLOCK_SOME"!=this.state.apiKey){var n="https://api.guildwars2.com/v2/account/achievements?access_token="+this.state.apiKey;fetch(n).then(function(e){if(e.ok)return e.json();throw 403==e.status?new Error("Please supply a valid API key with 'progression' scope"):new Error(e.text())}).then(function(t){e.setState({achievements:t,areAccountAchievementsLoaded:!0})},function(t){e.setState({error:t})})}else{var o=t.generatePartialProgress();this.setState({achievements:o,areAccountAchievementsLoaded:!0})}else this.setState({achievements:[],areAccountAchievementsLoaded:!0});else{var r=t.generateCompleteProgress();this.setState({achievements:r,areAccountAchievementsLoaded:!0})}}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.areBooksLoaded,o=e.areAchievementsLoaded,a=(e.books,e.achievements),c=e.repository;e.preview;if(e.areAccountAchievementsLoaded)return i.a.render(r.a.createElement(he,{achievements:a,repository:c}),document.getElementById("root")),null;var u=null;return t?u=r.a.createElement("div",{className:"alert alert-danger m-4"},r.a.createElement("b",null,"Error"),": ",t.message):n&&o||(u=r.a.createElement("div",{className:"alert alert-info m-4"},"Loading data...")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col p-0"},r.a.createElement("nav",{class:"navbar navbar-dark bg-tyria sticky-top shadow mb-2"},r.a.createElement("a",{class:"navbar-brand",href:"#"},"Tyrian Bookshelf")),u,r.a.createElement("form",{onSubmit:this.handleSubmit,className:"p-2"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"api-key"},"API Key"),r.a.createElement("input",{id:"api-key",className:"form-control",onChange:this.handleChange,value:this.state.apiKey})),r.a.createElement("button",{type:"submit",className:"btn btn-tyria"},"Load"))))}},{key:"handleChange",value:function(e){this.setState({apiKey:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.state.apiKey.length&&this.loadAccountAchievements()}}])&&ve(n.prototype,o),a&&ve(n,a),t}();i.a.render(r.a.createElement(ke,null),document.getElementById("root"))}]);